<section class="home">
  <div class="home__card">
    <div class="home__meta">
      <p class="eyebrow">Home renovations</p>
      <div class="theme-switch" role="group" aria-label="Theme">
        <button type="button"
                class="theme-option"
                [class.active]="!isDarkTheme"
                [attr.aria-pressed]="!isDarkTheme"
                (click)="setTheme('light')">
          Light
        </button>
        <button type="button"
                class="theme-option"
                [class.active]="isDarkTheme"
                [attr.aria-pressed]="isDarkTheme"
                (click)="setTheme('dark')">
          Dark
        </button>
      </div>
    </div>
    <h1>Plan, track, and finish renovations with clarity.</h1>
    <p class="subtitle">Jump straight into active projects and keep budgets, contractors, and timelines aligned.</p>
    <div class="home__actions">
      <a routerLink="/projects" class="primary-btn">View active renovations</a>
      <a routerLink="/projects/new" class="ghost-btn">Create new project</a>
    </div>
  </div>

  <div class="home-map">
    <div class="home-map__header">
      <div>
        <p class="eyebrow">Active locations</p>
        <h2>See your renovations on the map</h2>
        <p class="subtitle map-subtitle">Pins appear automatically from each project address. Click a pin to open the project and see progress and ETA.</p>
      </div>
      <div class="home-map__status">
        <span class="chip" *ngIf="loadingProjects">Loading map...</span>
        <span class="chip chip--muted" *ngIf="!loadingProjects && projects.length === 0 && !projectError">No locations yet</span>
        <span class="chip" *ngIf="missingLocationCount > 0">
          {{ missingLocationCount }} missing location{{ missingLocationCount === 1 ? '' : 's' }}
        </span>
      </div>
    </div>

    <div *ngIf="projectError" class="status state-error">
      {{ projectError }}
    </div>

    <app-projects-overview-map
      *ngIf="!projectError"
      [projects]="projects"
      [loading]="loadingProjects">
    </app-projects-overview-map>

    <p class="map-hint" *ngIf="!projectError && missingLocationCount > 0">
      Projects without coordinates stay off the map. Set a marker on their detail page to make them visible.
    </p>
  </div>
</section>
